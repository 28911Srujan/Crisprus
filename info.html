<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Server Info Stream</title>
    <style>
        body { font-family: 'Courier New', monospace; padding: 20px; line-height: 1.5; }
        p { margin: 0; font-size: 1.2em; color: black; }
    </style>
</head>
<body>
    <div id="data-container"></div>

    <script>
        function updateDisplay() {
            const container = document.getElementById('data-container');
            const signals = JSON.parse(localStorage.getItem('mc_signals')) || {};
            
            let html = '';
            for (let i = 1; i <= 13; i++) {
                const state = signals[i] || 'stop';
                // Server readable format: [Server 1 - start]
                html += `<p>[Server ${i} - ${state}]</p>`;
            }
            container.innerHTML = html;
            console.log("Data refreshed: " + new Date().toLocaleTimeString());
        }

        // 1. Update when the other tab sends a signal
        window.addEventListener('storage', updateDisplay);

        // 2. Auto update every 5 seconds (as requested)
        setInterval(updateDisplay, 5000);

        // Initial load
        updateDisplay();
    </script>
</body>
</html>
